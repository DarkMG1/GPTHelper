plugins {
    id 'java'
    id 'com.github.johnrengelman.shadow' version '7.0.0'
    id 'application'
}

group 'GPTHelper'
version '0.0.1-BETA'


repositories {
    mavenCentral()
    maven { url = 'https://m2.dv8tion.net/releases' }
}

ext {
    javaMainClass = "dev.darkmg1.gpthelper.GPTHelper"
}

application {
    mainClass = javaMainClass
}

dependencies {
    implementation("net.dv8tion:JDA:5.0.0-beta.17")
    implementation 'com.theokanning.openai-gpt3-java:service:0.18.1'
    implementation group: 'com.google.code.gson', name: 'gson', version: '2.10.1'


    compileOnly('org.projectlombok:lombok:1.18.20')
    annotationProcessor('org.projectlombok:lombok:1.18.20')
}

shadowJar {
    archiveBaseName.set(rootProject.name)
    archiveClassifier.set('')
//    delete fileTree('./target/') {
//        exclude archivesBaseName
//    }
    delete file('./target/' + archiveBaseName)
    destinationDirectory.set(file("./target"))
    from sourceSets.getByName("main").output
    configurations = [project.configurations.getByName("runtimeClasspath")]
}